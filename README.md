# java-intershop - Витрина интернет-магазина

## Описание проекта

Проект представляет собой полностью функционирующий интернет-магазин с поддержкой онлайн-платежей и высокоэффективным кешированием данных. Он построен на основе технологий Spring Boot/WebFlux и Redis, обеспечивая отличную производительность и масштабируемость.

### Основные функциональные возможности:

- **Веб-витрина товаров**: удобная навигация по ассортименту, фильтры, сортировка и пагинация для удобной работы пользователей.
- **Корзина покупателей**: возможность добавлять товары, редактировать количество и оформлять заказ.
- **Система оформления заказов**: пользователи могут оформить заказ, получив мгновенную информацию о доступности товара и стоимости доставки.
- **Онлайн-платежи**: подключение к RESTful-сервису платежей.
- **Кеширование товаров**: используется высокопроизводительный Redis для кеширования данных о товарах, что существенно ускоряет их загрузку и улучшает отзывчивость сайта.
- **Масштабируемость**: архитектура построена на микросервисах, что облегчает горизонтальное масштабирование и повышение производительности.
- **Модульное тестирование**: обширное покрытие модульными и интеграционными тестами, гарантирующими стабильность и качество работы.
- **Документирование API**: полная документация REST API для разработчиков и внешних клиентов.

### Технология и инфраструктура:

- **Серверная сторона**: Spring Boot, Spring WebFlux, Spring Data Redis.
- **Клиентская сторона**: HTML/CSS, JavaScript.
- **Хранение данных**: PostgreSQL (локально или в Docker).
- **Кэширование**: Redis
* **Тестирование**: JUnit 5, Spring Boot Test
* **Контейнеризация**: Docker
* **Java версия**: 21
- **Собрать и запустить**: Maven/Gradle, Docker/Docker Compose.

## Функциональность

### Страница витрины товаров
* **Список товаров** с изображениями, названиями и ценами
* **Пагинация** (10/20/50/100 товаров на странице)
* **Фильтры**:
  * Поиск по названию
  * Сортировка по цене
  * Сортировка по алфавиту
* **Управление корзиной** через кнопки добавления/удаления/изменения количества

### Страница товара
* **Детальная информация** о товаре
* **Изображение**
* **Описание**
* **Цена**
* **Управление корзиной**

### Корзина покупателя
* **Список товаров** в корзине
* **Общее количество** и стоимость
* **Управление товарами** (удаление, изменение количества)
* **Оформление заказа**

### Заказы
* **Список всех заказов** с общей суммой
* **Детальная информация** по каждому заказу
* **Список купленных товаров**

### Дополнительные возможности
* **Загрузка товаров** через веб-интерфейс или импорт из файла
* **Тестирование** всех основных функций
* **Docker-контейнер** для развертывания

## Запуск приложения

1. Клонируйте репозиторий: `git clone ...`
2. Установите зависимости: `mvn install`
3. Запустите приложение: `java -jar target/....jar`
4. Для Docker: `docker build`

Тестирование

Проект включает:
* Unit-тесты для сервисов
* Интеграционные тесты для контроллеров
* Тестирование взаимодействия с базой данных

## Эндпоинты для главного магазина (порт 8080)

| Эндпоинт           | Параметр                   | Ответ (или редирект)                                 |
|--------------------|----------------------------|--------------------------------------------------------|
| `GET /`            | string search<br>string sort (NO, ALPHA, PRICE)<br>int pageSize<br>int pageNumber | Шаблон `main.html`, список товаров                    |
| `GET /items/{id}`  |                            | Шаблон `item.html`, карточка товара                  |
| `GET /cart`  |                            | Шаблон `cart.html`, список товаров в корзине          |
| `POST /cart/items/{id}` | string action (PLUS, MINUS, DELETE) | Редирект на `/cart`                             |
| `POST /cart/buy`        |                            | Редирект на `/orders/{id}?newOrder=true`              |
| `GET /orders`      |                            | Шаблон `orders.html`, список заказов                 |
| `GET /orders/{id}` | boolean newOrder           | Шаблон `order.html`, карточка заказа                 |

## Эндпоинты для сервиса оплаты (порт 8081)

Вот таблица с эндпоинтами для сервиса платежей (предназначенного для порта 8081):

## Эндпоинты для сервиса платежей (порт 8081)

| Эндпоинт           | Параметр                           | Ответ                                     |
|--------------------|------------------------------------|-------------------------------------------|
| `GET /payments/balance` |                                  | Текущий баланс (JSON)                      |
| `POST /payments/pay`   | `double amount` (сумма платежа)  | Результат платежа (обновлённый баланс в JSON) |
| `GET /` |                                  | Информация swagger об эндпойнтах |